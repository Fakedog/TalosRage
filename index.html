<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAGE QUIT</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <div id="main-menu">
        <div id="logo-container">
            <img src="IMG/logo.jpg" alt="RAGE QUIT">
        </div>
        <div class="input-group">
            <input type="text" id="menu-input-name" placeholder="NOME PLAYER" maxlength="12">
        </div>
        <button id="play-btn">ENTRA IN ARENA</button>
    </div>

    <canvas id="gameCanvas"></canvas>

    <!-- CLASSIC SCRIPTS â€“ NO MODULES -->
    <script src="js/config.js"></script>
    <script src="js/three-setup.js"></script>
    <script src="js/models.js"></script>
    <script src="js/animations.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/socket.js"></script>
    <script src="js/inputs.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/combat.js"></script>
    <script src="js/game-loop.js"></script>

    <script>
        const socket = io();
        window.socket = socket;

        // THIS IS THE ONLY THING THAT WAS MISSING
        document.getElementById('play-btn').addEventListener('click', () => {
            const name = document.getElementById('menu-input-name').value.trim() || "Guerriero";
            socket.emit('joinGame', { username: name });
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('gameCanvas').style.display = 'block';
            document.body.requestPointerLock();
            initThree();
            initSocket();
            setupInputs();
            animate();
        });
    </script>
</body>
</html>
